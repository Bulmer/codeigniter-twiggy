<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <title>Twiggy - Twig template engine implementation for CodeIgnigter</title>
  <link href='http://fonts.googleapis.com/css?family=Comfortaa:400,700,300' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="./assets/stylesheets/main.css">
</head>

<body>
  <a href="https://github.com/edmundask/codeigniter-twiggy">
    <img style="position: fixed; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" />
  </a>

  <a href="#top" id="to-top">To Top</a>

  <header>

    <div class="container centered">

      <div id="introduction">

        <div id="logo">

          <a href="http://edmundask.github.com/codeigniter-twiggy"></a>

        </div>

        <a class="donate" href="#donate">Donate</a>

        <div class="clear"></div>

        <div class="description">

          <p>twig template engine implementation for PHP framework called <a href="http://codeigniter.com">CodeIgniter</a></p>

        </div>

        <p class="wip">This is a work-in-progress, so hopefully the next time you visit this page you'll get to see more stuff.</p>

        <br><br>

        <a href="http://getsparks.org/packages/Twiggy/versions/HEAD/show" class="block-link">Twiggy Spark</a>

        <a href="http://twig.sensiolabs.org" class="block-link">Official Twig Website</a>

        <br><br><br>

        <p>Current version: <span class="tagged">0.8.1</span></p>

      </div> <!-- #introduction END -->

      <nav>

        <h1>Navigation</h1>

        <ul>

          <li><a href="#overview">Overview</a></li>
          <li><a href="#installation">Installation &amp; Requirements</a></li>
          <li><a href="#usage">Basic Usage</a></li>
          <li><a href="#examples">Examples &amp; Best Practices</a></li>
          <li><a href="#about">About</a></li>

        </ul>

      </nav>

    </div> <!-- .container END -->

  </header>

  <section id="overview" class="container centered spaced">

      <h1>Overview</h1>

      <p>Twiggy is not just a simple implementation of Twig template engine for CodeIgniter. It supports themes, layouts, templates for regular apps and also for apps that use HMVC (module support). It is supposed to make life easier for developing and maitaining CodeIgniter applications where themes and nicely structured templates are necessary.</p>

      <p>Twig by itself is a very powerful and flexible templating system but with CodeIgniter it is even cooler! With Twiggy you can separately set the theme, layout and template for each page. What is even more interesting, this does not replace CodeIgniter's default Views, so you can still load views as such: $this->load->view().</p>

  </section>

  <section id="installation" class="container centered spaced">

    <h1>Installation &amp; Requirements</h1>

    <p>To make sure Twiggy works correctly, you need to have:</p>

    <ul>

      <li>PHP 5.3+</li>
      <li>CodeIgniter 2.x</li>

    </ul>

    <p>Note that you don’t need to install Twig yourself, it comes with Twiggy.</p>

    <h2>How to install</h2>

    <p>The installation is a piece of cake! All you need to do is to have sparks installed and run the following in the command line:</p>

    <pre>php tools\spark install -vx.x.x Twiggy</pre>

    <p>where x.x.x is the version of Twiggy you want to install.</p>

  </section>

  <section id="usage" class="container centered spaced">

    <h1>Basic Usage</h1>

    <p>Here we'll take a look at how to use Twiggy for the firs time.</p>

    <h2>1. Load it</h2>

    <pre>$this->load->spark('twiggy/x.x.x');</pre>

    <br>

    <h2>2. Set up dir structure</h2>

    <ol>

      <li>
        <p>Create a directory structure:</p>

        <pre>+-{APPPATH}/
| +-themes/
| | +-default/
| | | +-_layouts/</pre>

        <br>

        <p>NOTE: <span class="tagged">{APPPATH}</span> is the folder where all your controllers, models and other neat stuff is placed. By default that folder is called application.</p>
      
      </li>

      <li>

        <p>Create a default layout <span class="tagged">index.html.twig</span> and place it in _layouts folder:</p>

        <pre>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
    &lt;head&gt;
        &lt;meta charset="utf-8"&gt;
        &lt;!--[if lt IE 9]&gt;
        &lt;script src="http://html5shim.googlecode.com/svn/trunk/html5.js"&gt;&lt;/script&gt;
        &lt;![endif]--&gt;
        &lt;title&gt;Default layout&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;

        {% block content %}

        {% endblock %}

    &lt;/body&gt;
&lt;/html&gt;</pre>

      </li>

      <li>

        <p>Create a default template file <span class="tagged">index.html.twig</span> at the root of default theme folder:</p>

        <pre>{% extends _layout %}

{% block content %}

    Default template file.

{% endblock %}</pre>

      </li>

      <li>

        <p>You should end up with a structure like this:</p>

        <pre>+-{APPPATH}/
| +-themes/
| | +-default/
| | | +-_layouts/
| | | | +-index.hml.twig
| | | +-index.html.twig</pre>

        <br>

      </li>

    </ol>

    <h2>3. Display the template</h2>

    <pre>$this->twiggy->display();</pre>

    <br>

    <h2>4. What's next?</h2>

    <p>In the example above we only displayed the default template and layout. Obviously, you can create as many layouts and templates as you want. For example, create a new template file <span class="tagged">welcome.html.twig</span> and load it before sending the output to the browser.</p>

    <pre>// Whoah, methoding chaining FTW!
$this->twiggy->template('welcome')->display();</pre>

    <br>

    <p>Notice that you only need to specify the name of the template (without the extension <span class="tagged">*.html.twig</span>).</p>

  </section>

  <section id="examples" class="container centered spaced">

    <h1>Examples &amp; Best Practices</h1>

    <p>There are a lot of ways you can use Twiggy and nobody is going to beat you with a bat if you do it your own way. On the other hand, knowing how to efficiently use this library to your advantage can't hurt, right? Okay then, here we go!</p>

    <h2>Data variables</h2>

    <p>Twiggy distinguishes two types of data variables: standard (local) and global. The first one is pretty obvious -- these variables are only available inside the loaded template.
      Global variables, on the other hand, are accessible from anywhere within Twig template files. They're extremely useful when you need to have access to some data no matter which template file you load, for example: authenticated user information such as username, avatar etc. 
      Standard variables are good for page-specific data. For example, you want to iterate through an array of tracks for a specific music album. So let's take a look at how to set and access data variables.</p>

    <h3>Synopsis</h3>

    <pre>$this->twiggy->set($key, $value, $global = FALSE)</pre>

    <h3>Standard variables</h3>

    <pre>$this->twiggy->set('tracks', array('Afterlife', 'The Original', 'The War Inside'));</pre>

    <h3>Global variables</h3>

    <pre>$this->twiggy->set('user', array('username' => 'edmundas', 'email' => 'my.name@email.com'), TRUE);</pre>

    <hr>

    <p>You can also set multiple variables at once.</p>

    <pre>$data = array();

// Presumably you'll want to get these from the database through the model
$data['albums'] = array('Nothing Is Sound', 'Oh! Gravity.', 'Vice Verses');
$data['tracks'] = array('Afterlife', 'The Original', 'The War Inside');

$this->twiggy->set($data);</pre>

    <p>In the example above those would be standard variables. In order to set multiple <span class="tagged">global</span> variables, just leave the second parameter empty (NULL) and set the third parameter as TRUE.</p>

    <pre>$data = array();

// Presumably you'll want to get these from the database through the model
$data['albums'] = array('Nothing Is Sound', 'Oh! Gravity.', 'Vice Verses');
$data['tracks'] = array('Afterlife', 'The Original', 'The War Inside');

// For some weird reason these need to be global
$this->twiggy->set($data, NULL, TRUE);</pre>

    <h3>Accessing data</h3>

    <p>We'll not cover how to use variables inside templates as everything is well documented at the <a href="http://twigy-project.org">official twig website</a>. However, sometimes you will need to get the data inside the controller, model or even standard CodeIgniter view files.</p>

    <pre>$albums = $this->twiggy->albums</pre>

    <p>Here we see a bit of PHP 5 magic with <span class="tagged">__get()</span> method to get data variables.</p>

    <h3>Unsetting data</h3>

    <pre>$this->twiggy->unset_data('albums');</pre>


    <h2>Handling output</h2>

    <p>You can echo the output by calling <span class="tagged">$this->twiggy->display()</span> at the end of your controller. However, there's another method which does not print the ouput but rather returns it.</p>

    <pre>
// Render (compile) the output but don't display it
$output = $this->twiggy->render();</pre>

    <p>This gives you the possibility of sending the output to the <span class="tagged">Output</span> class (one of CodeIgniter's system classes).</p>

    <pre>// Render (compile) the output but don't display it
$output = $this->twiggy->render();

// Set output
$this->output->set_output($output);</pre>

    <h2>Method chaining</h2>

    <p>Instead of calling each method on a new line, why don't we take advantage of PHP 5 and use method chaining?</p>

    <pre>$this->twiggy->set('username', 'edmundas')->template('account')->display();</pre>

    <p>This is the same as writting:</p>

    <pre>$this->twiggy->set('username', 'edmundas');
$this->twiggy->template('account');
$this->twiggy->display();</pre>

  </section>

  <section id="about" class="container centered spaced">

    <h1>About</h1>

    <p>The author of Twiggy is <a href="http://edmundask.lt">Edmundas Kondrašovas</a>. However, he does not claim every piece of code as his own. Credit also goes to the authors of <a href="http://twig-project.org">Twig</a>.</p>

    <h2>Donate</h2>

    <!--<p>Twiggy is absolutely free of use and does not cost anything. But if you want, you can support the author by making a donation. See the details below.</p>-->

  </section>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script src="./assets/javascripts/jquery.easing.1.3.js"></script>
  <script src="./assets/javascripts/application.js"></script>
</body>
</html>